"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=exports.processFn=void 0;var _Queue=_interopRequireDefault(require("../../lib/Queue")),_JobQueue=_interopRequireDefault(require("../../lib/JobQueue")),_video=_interopRequireDefault(require("./video")),_display=_interopRequireDefault(require("./display"));function _interopRequireDefault(a){return a&&a.__esModule?a:{default:a}}var processFn=function(a,b,c){return function(d,e){for(var f=new _Queue.default,g=new _Queue.default;!d.isEmpty;){var h=d.dequeue();"video"===h.data.type?g.enqueue(h):"display"===h.data.type&&f.enqueue(h)}Promise.all([(0,_video.default)(a,b,g),(0,_display.default)(a,b,c,f)]).then(e)}};exports.processFn=processFn;var bidManager=function(){var a=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},b=a.refresh,c=a.chunkSize,d=void 0===c?5:c,e=a.bidProviders,f=void 0===e?[]:e,g=a.bidTimeout,h=void 0===g?1e3:g,i=a.refreshDelay,j=void 0===i?100:i,k=a.onBiddersReady,l=void 0===k?function(){}:k,m=new _JobQueue.default({canProcess:!1,delay:j,chunkSize:d,processFn:processFn(f,h,b)});return l(m.start),{refresh:m.add}},_default=bidManager;exports.default=_default;